<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} - Qwerty.town</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{{ url_for('static', path='/css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='/css/business-module.css') }}">
</head>
<body>
    <header class="bg-primary text-white py-3">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h1 class="fs-3 m-0">
                        <img src="{{ url_for('static', path='/img/logo.png') }}" alt="Qwerty.town" height="40" class="me-2">
                        <a href="/" class="text-white text-decoration-none">Qwerty.town</a>
                    </h1>
                    <p class="m-0">Редактирование профиля бизнеса</p>
                </div>
                <div class="col-md-6 text-end">
                    <a href="/business/dashboard" class="btn btn-sm btn-light">Вернуться в кабинет</a>
                    <a href="#" class="btn btn-sm btn-light">Уведомления <span class="badge bg-danger">3</span></a>
                    <a href="#" class="btn btn-sm btn-outline-light">Выйти</a>
                </div>
            </div>
        </div>
    </header>

    <main class="container py-4">
        <div class="row">
            <!-- Боковое меню -->
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Меню</h5>
                    </div>
                    <div class="list-group list-group-flush">
                        <a href="/business/dashboard" class="list-group-item list-group-item-action">
                            <i class="bi bi-speedometer2 me-2"></i> Обзор
                        </a>
                        <a href="/business/profile/edit" class="list-group-item list-group-item-action active">
                            <i class="bi bi-building me-2"></i> Профиль компании
                        </a>
                        <a href="/business/analytics" class="list-group-item list-group-item-action">
                            <i class="bi bi-graph-up me-2"></i> Аналитика
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="bi bi-calendar-check me-2"></i> Расписание
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="bi bi-bookmark-check me-2"></i> Бронирования
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="bi bi-people me-2"></i> Клиенты
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="bi bi-bag me-2"></i> Услуги и товары
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="bi bi-gear me-2"></i> Настройки
                        </a>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="mb-0">Подсказки</h5>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <h6><i class="bi bi-lightbulb me-2"></i> Полезно знать</h6>
                            <p class="small mb-0">Заполненный на 100% профиль повышает вероятность появления в результатах поиска на 70%</p>
                        </div>
                        <div class="alert alert-warning">
                            <h6><i class="bi bi-exclamation-triangle me-2"></i> Внимание</h6>
                            <p class="small mb-0">Не забудьте сохранить изменения после редактирования информации</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Основной контент -->
            <div class="col-md-9">
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Управление профилем</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between mb-3">
                            <h4>Информация о компании</h4>
                            <div>
                                <a href="/business/profile/{{ company.id }}" class="btn btn-outline-primary btn-sm">
                                    <i class="bi bi-eye me-1"></i> Просмотр профиля
                                </a>
                            </div>
                        </div>
                        
                        <div class="progress mb-4" style="height: 10px;">
                            <div class="progress-bar" role="progressbar" style="width: 75%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">75%</div>
                        </div>
                        <p class="text-muted text-center mb-4">Заполнено 75% профиля</p>
                        
                        <form id="companyEditForm">
                            <div class="mb-4">
                                <h5 class="border-bottom pb-2">Основная информация</h5>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="name" class="form-label">Название компании <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" id="name" name="name" value="{{ company.name }}" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="business_type" class="form-label">Тип бизнеса <span class="text-danger">*</span></label>
                                        <select class="form-select" id="business_type" name="business_type" required>
                                            <option value="">Выберите тип бизнеса</option>
                                            <option value="restaurant" {% if company.business_type == 'restaurant' %}selected{% endif %}>Ресторан/Кафе</option>
                                            <option value="beauty" {% if company.business_type == 'beauty' %}selected{% endif %}>Салон красоты</option>
                                            <option value="health" {% if company.business_type == 'health' %}selected{% endif %}>Медицинский центр</option>
                                            <option value="sport" {% if company.business_type == 'sport' %}selected{% endif %}>Спортивный клуб</option>
                                            <option value="education" {% if company.business_type == 'education' %}selected{% endif %}>Образовательный центр</option>
                                            <option value="other" {% if company.business_type == 'other' %}selected{% endif %}>Другое</option>
                                        </select>
                                    </div>
                                    <div class="col-md-12">
                                        <label for="description" class="form-label">Описание <span class="text-danger">*</span></label>
                                        <textarea class="form-control" id="description" name="description" rows="4" required>{{ company.description }}</textarea>
                                        <div class="form-text">Расскажите клиентам о вашем бизнесе, услугах и ценностях (200-500 символов)</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h5 class="border-bottom pb-2">Контактная информация</h5>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="phone" class="form-label">Телефон <span class="text-danger">*</span></label>
                                        <input type="tel" class="form-control" id="phone" name="phone" value="{{ company.phone }}" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                                        <input type="email" class="form-control" id="email" name="email" value="{{ company.email }}" required>
                                    </div>
                                    <div class="col-md-12">
                                        <label for="website" class="form-label">Веб-сайт</label>
                                        <input type="url" class="form-control" id="website" name="website" value="{{ company.website }}">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h5 class="border-bottom pb-2">Местоположение</h5>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="city" class="form-label">Город <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" id="city" name="city" value="{{ company.location.city }}" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="street" class="form-label">Улица <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" id="street" name="street" value="{{ company.location.street }}" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="building" class="form-label">Дом <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" id="building" name="building" value="{{ company.location.building }}" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="floor" class="form-label">Этаж</label>
                                        <input type="text" class="form-control" id="floor" name="floor" value="{{ company.location.floor }}">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="office" class="form-label">Офис/Помещение</label>
                                        <input type="text" class="form-control" id="office" name="office" value="{{ company.location.office }}">
                                    </div>
                                    <div class="col-12">
                                        <label for="additional_info" class="form-label">Дополнительная информация</label>
                                        <textarea class="form-control" id="additional_info" name="additional_info" rows="2">{{ company.location.additional_info }}</textarea>
                                        <div class="form-text">Как найти, ориентиры, парковка и т.д.</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h5 class="border-bottom pb-2">Время работы</h5>
                                <div class="row g-3">
                                    {% for day in ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'] %}
                                    {% set day_ru = {'monday': 'Понедельник', 'tuesday': 'Вторник', 'wednesday': 'Среда', 'thursday': 'Четверг', 'friday': 'Пятница', 'saturday': 'Суббота', 'sunday': 'Воскресенье'}[day] %}
                                    <div class="col-lg-6">
                                        <div class="card mb-2">
                                            <div class="card-body p-3">
                                                <div class="form-check form-switch mb-2">
                                                    <input class="form-check-input working-day-toggle" type="checkbox" id="workday_{{ day }}" name="workday_{{ day }}" data-day="{{ day }}" 
                                                        {% if company.working_hours and day in company.working_hours and company.working_hours[day].is_working_day %}checked{% endif %}>
                                                    <label class="form-check-label fw-bold" for="workday_{{ day }}">{{ day_ru }}</label>
                                                </div>
                                                <div class="working-hours-inputs" id="hours_{{ day }}" {% if not company.working_hours or day not in company.working_hours or not company.working_hours[day].is_working_day %}style="display: none;"{% endif %}>
                                                    <div class="row g-2">
                                                        <div class="col-5">
                                                            <input type="time" class="form-control form-control-sm" id="{{ day }}_open" name="{{ day }}_open" 
                                                                value="{{ company.working_hours[day].open_time if company.working_hours and day in company.working_hours else '09:00' }}">
                                                            <label class="form-label form-label-sm">Открытие</label>
                                                        </div>
                                                        <div class="col-5">
                                                            <input type="time" class="form-control form-control-sm" id="{{ day }}_close" name="{{ day }}_close" 
                                                                value="{{ company.working_hours[day].close_time if company.working_hours and day in company.working_hours else '18:00' }}">
                                                            <label class="form-label form-label-sm">Закрытие</label>
                                                        </div>
                                                        <div class="col-2 d-flex align-items-center">
                                                            <button type="button" class="btn btn-sm btn-outline-secondary copy-time" data-day="{{ day }}">
                                                                <i class="bi bi-copy"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h5 class="border-bottom pb-2">Фотографии и логотип</h5>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Логотип</label>
                                        <div class="card p-3 text-center">
                                            <div class="mb-3">
                                                {% if company.logo %}
                                                <img src="{{ company.logo }}" alt="Логотип" class="img-thumbnail" style="max-height: 150px;">
                                                {% else %}
                                                <div class="bg-light p-5 rounded">
                                                    <i class="bi bi-image text-muted display-4"></i>
                                                </div>
                                                {% endif %}
                                            </div>
                                            <input type="file" class="form-control" id="logo" name="logo" accept="image/*">
                                            <div class="form-text">Рекомендуемый размер: 300x300 пикселей</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Главное фото</label>
                                        <div class="card p-3 text-center">
                                            <div class="mb-3">
                                                {% if company.main_photo %}
                                                <img src="{{ company.main_photo }}" alt="Главное фото" class="img-thumbnail" style="max-height: 150px;">
                                                {% else %}
                                                <div class="bg-light p-5 rounded">
                                                    <i class="bi bi-image text-muted display-4"></i>
                                                </div>
                                                {% endif %}
                                            </div>
                                            <input type="file" class="form-control" id="main_photo" name="main_photo" accept="image/*">
                                            <div class="form-text">Рекомендуемый размер: 1200x600 пикселей</div>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Галерея (до 5 фото)</label>
                                        <div class="card p-3">
                                            <div class="row mb-3">
                                                {% for i in range(5) %}
                                                <div class="col">
                                                    <div class="text-center">
                                                        {% if company.gallery and company.gallery|length > i %}
                                                        <img src="{{ company.gallery[i] }}" alt="Фото в галерее" class="img-thumbnail" style="height: 100px; width: 100px; object-fit: cover;">
                                                        {% else %}
                                                        <div class="bg-light rounded d-flex align-items-center justify-content-center" style="height: 100px; width: 100px;">
                                                            <i class="bi bi-plus-lg text-muted"></i>
                                                        </div>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                {% endfor %}
                                            </div>
                                            <input type="file" class="form-control" id="gallery" name="gallery" accept="image/*" multiple>
                                            <div class="form-text">Рекомендуемый размер: 800x600 пикселей</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h5 class="border-bottom pb-2">Социальные сети</h5>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="vk" class="form-label">ВКонтакте</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-vk"></i></span>
                                            <input type="url" class="form-control" id="vk" name="vk" value="{{ company.social_networks.vk if company.social_networks else '' }}">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="telegram" class="form-label">Telegram</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-telegram"></i></span>
                                            <input type="text" class="form-control" id="telegram" name="telegram" value="{{ company.social_networks.telegram if company.social_networks else '' }}">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="whatsapp" class="form-label">WhatsApp</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-whatsapp"></i></span>
                                            <input type="text" class="form-control" id="whatsapp" name="whatsapp" value="{{ company.social_networks.whatsapp if company.social_networks else '' }}">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="youtube" class="form-label">YouTube</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-youtube"></i></span>
                                            <input type="url" class="form-control" id="youtube" name="youtube" value="{{ company.social_networks.youtube if company.social_networks else '' }}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-flex justify-content-between mt-4">
                                <button type="button" class="btn btn-outline-secondary" onclick="window.location.href='/business/dashboard'">
                                    <i class="bi bi-arrow-left me-1"></i> Вернуться
                                </button>
                                <div>
                                    <button type="reset" class="btn btn-outline-danger me-2">
                                        <i class="bi bi-x-circle me-1"></i> Отменить
                                    </button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-check-circle me-1"></i> Сохранить изменения
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-dark text-white py-3 mt-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <p class="m-0">&copy; <span class="current-year">2023</span> Qwerty.town. Все права защищены.</p>
                </div>
                <div class="col-md-6 text-end">
                    <a href="#" class="text-white me-3">Пользовательское соглашение</a>
                    <a href="#" class="text-white">Политика конфиденциальности</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', path='/js/main.js') }}"></script>
    <script src="{{ url_for('static', path='/js/business-profile-edit.js') }}"></script>
</body>
</html> 